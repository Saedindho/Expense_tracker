{% extends "base.html" %}
{% block title %}Edit Expense - Student Expense Tracker{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card shadow-sm">
      <div class="card-body">
        <h2 class="mb-3">Edit Expense</h2>

        <form method="post" class="row g-3">
          <div class="col-md-4">
            <label class="form-label">Category</label>
            <select class="form-select" name="category_id" required>
              {% for c in categories %}
                <option value="{{ c.id }}" {% if form.get('category_id') == (c.id|string) %}selected{% endif %}>
                  {{ c.name }}
                </option>
              {% endfor %}
            </select>
          </div>

          <div class="col-md-4">
            <label class="form-label">Amount (Â£)</label>
            <input class="form-control" name="amount" value="{{ form.get('amount','') }}" required>
          </div>

          <div class="col-md-4">
            <label class="form-label">Date</label>
            <input class="form-control" type="date" name="expense_date" value="{{ form.get('expense_date','') }}" required>
          </div>

          <div class="col-12">
            <label class="form-label">Description</label>
            <input class="form-control" name="description" value="{{ form.get('description','') }}" required>
          </div>

          <div class="col-12">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="is_essential" id="essential"
                     {% if form.get('is_essential') in (1,'1','on') %}checked{% endif %}>
              <label class="form-check-label" for="essential">Essential expense</label>
            </div>
          </div>

          <div class="col-12 d-flex gap-2">
            <button class="btn btn-primary" type="submit">Update</button>
            <a class="btn btn-outline-secondary" href="{{ url_for('expenses') }}">Back</a>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>
{% endblock %}
